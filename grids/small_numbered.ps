%!PS-Adobe-3.0 EPSF-3.0
%%Title: 
%%Creator: mkhexgrid 0.1.1
%%Pages: 1
%%BoundingBox: 0 0 596 842
%%EndComments
%%BeginProlog
save countdictstack mark newpath /showpage {} def /setpagedevice {pop} def

%
% Parameters
%
/#copies 1 def

/mleft 56.6929 def
/mright 56.6929 def
/mtop 56.6929 def
/mbottom 56.6929 def

/hex_side   15.7669 def
/hex_height { 2 hex_side mul 60 sin mul} bind def
/hex_width  { 2 hex_side mul } bind def
/hex_color  {0.5 0.5 0.5} def
/hex_linewidth 1 def

/rows 20 def
/cols 20 def
/lowfirstcol 0 def

/center_size 3 def
/center_color {0.5 0.5 0.5} def

/coord_font /Courier def
/coord_size 8 def
/coord_digits 2 def
/coord_color {0.5 0.5 0.5} def
/coord_cskip 1 def
/coord_rskip 1 def
/coord_cstart 1 def
/coord_rstart 1 def
/coord_cstart_right 0 def
/coord_rstart_top 1 def
/coord_bearing 0 def
/coord_distance 0 def
/coord_tilt 0 def

%
% Definitions
%
/line {hex_side 0 rlineto} def
/no_line {hex_side 0 rmoveto} def

%
%             1
%          ________
%         /        \  
%     0  /          \ 2
%       /            \________
%                        3
%

/side
{
   dup 0 eq {
      % 0
      60 rotate
      line
      -60 rotate 
   } {
      dup 1 eq {
         % 1
         line
      } {
         dup 2 eq {
            % 2
            -60 rotate
            line
            60 rotate
         } {
            % 3
            line
         } ifelse
      } ifelse
   } ifelse 

   pop
} bind def

/side_skip
{
   dup 0 eq {
      % 0
      60 rotate
      line
      -60 rotate
   } {
      dup 1 eq {
         % 1
         no_line
      } {
         dup 2 eq {
            % 2
            -60 rotate
            line
            60 rotate
         } {
            % 3
            no_line
         } ifelse
      } ifelse
   } ifelse 

   pop
} bind def

/edge
{
   0 eq {
      % 0
      -60 rotate
      line
   } {
      % 1
      60 rotate
      line
   } ifelse
} bind def

%%EndProlog
%%Page: 1 1

newpath

%
% draw the hex grid
%
hex_color setrgbcolor
hex_linewidth setlinewidth

mleft mbottom moveto

lowfirstcol 0 eq {
   60 rotate
   no_line
   -60 rotate

   1 1 2 cols mul cols 2 mod sub { 4 mod side } for

   1 cols 2 mod add 60 mul rotate
   1 cols 2 mod sub 1 2 rows mul 1 sub cols 2 mod sub { 2 mod edge } for

   1 cols 2 mod add 60 mul rotate
   cols 2 mod 1 add 1 2 cols mul 2 cols 2 mod mul add { 4 mod side } for

   60 rotate 
   1 1 2 rows mul 1 sub { 2 mod edge } for
   closepath

   60 rotate
   rows 1 sub {
      currentpoint

      3 1 2 cols mul 1 add { 4 mod side_skip } for
      moveto

      0 hex_height rmoveto
      currentpoint

      1 1 2 cols mul 1 sub { 4 mod side } for
      moveto
   } repeat

   3 1 2 cols mul 1 add { 4 mod side_skip } for
} {
   0 0.5 hex_height mul rmoveto

   2 1 2 cols mul 2 add cols 1 add 2 mod sub { 4 mod side } for

   1 cols 1 add 2 mod add 60 mul rotate
   cols 2 mod 1 2 rows mul 1 sub cols 1 add 2 mod sub { 2 mod edge } for

   1 cols 1 add 2 mod add 60 mul rotate
   2 cols 2 mod sub 1 2 cols mul 1 add 2 cols 2 mod mul sub { 4 mod side } for

   120 rotate
   0 1 2 rows mul 2 sub { 2 mod edge } for
   closepath

   120 rotate
   0.25 hex_width mul 0.5 hex_height mul rmoveto
   rows 1 sub {
      currentpoint
      currentpoint
      1 1 2 cols mul 2 sub { 4 mod side_skip } for
      moveto

      3 1 2 cols mul 1 add { 4 mod side } for
      moveto

      0 hex_height rmoveto
   } repeat

   1 1 2 cols mul 2 sub { 4 mod side_skip } for
} ifelse

stroke

%
% print the coordinates
%
coord_color setrgbcolor
coord_font findfont
coord_size scalefont
setfont

/coord_text [
(0120) (0119) (0118) (0117) (0116) (0115) (0114) (0113) (0112) (0111) (0110) (0109) (0108) (0107) (0106) (0105) (0104) (0103) (0102) (0101) 
(0220) (0219) (0218) (0217) (0216) (0215) (0214) (0213) (0212) (0211) (0210) (0209) (0208) (0207) (0206) (0205) (0204) (0203) (0202) (0201) 
(0320) (0319) (0318) (0317) (0316) (0315) (0314) (0313) (0312) (0311) (0310) (0309) (0308) (0307) (0306) (0305) (0304) (0303) (0302) (0301) 
(0420) (0419) (0418) (0417) (0416) (0415) (0414) (0413) (0412) (0411) (0410) (0409) (0408) (0407) (0406) (0405) (0404) (0403) (0402) (0401) 
(0520) (0519) (0518) (0517) (0516) (0515) (0514) (0513) (0512) (0511) (0510) (0509) (0508) (0507) (0506) (0505) (0504) (0503) (0502) (0501) 
(0620) (0619) (0618) (0617) (0616) (0615) (0614) (0613) (0612) (0611) (0610) (0609) (0608) (0607) (0606) (0605) (0604) (0603) (0602) (0601) 
(0720) (0719) (0718) (0717) (0716) (0715) (0714) (0713) (0712) (0711) (0710) (0709) (0708) (0707) (0706) (0705) (0704) (0703) (0702) (0701) 
(0820) (0819) (0818) (0817) (0816) (0815) (0814) (0813) (0812) (0811) (0810) (0809) (0808) (0807) (0806) (0805) (0804) (0803) (0802) (0801) 
(0920) (0919) (0918) (0917) (0916) (0915) (0914) (0913) (0912) (0911) (0910) (0909) (0908) (0907) (0906) (0905) (0904) (0903) (0902) (0901) 
(1020) (1019) (1018) (1017) (1016) (1015) (1014) (1013) (1012) (1011) (1010) (1009) (1008) (1007) (1006) (1005) (1004) (1003) (1002) (1001) 
(1120) (1119) (1118) (1117) (1116) (1115) (1114) (1113) (1112) (1111) (1110) (1109) (1108) (1107) (1106) (1105) (1104) (1103) (1102) (1101) 
(1220) (1219) (1218) (1217) (1216) (1215) (1214) (1213) (1212) (1211) (1210) (1209) (1208) (1207) (1206) (1205) (1204) (1203) (1202) (1201) 
(1320) (1319) (1318) (1317) (1316) (1315) (1314) (1313) (1312) (1311) (1310) (1309) (1308) (1307) (1306) (1305) (1304) (1303) (1302) (1301) 
(1420) (1419) (1418) (1417) (1416) (1415) (1414) (1413) (1412) (1411) (1410) (1409) (1408) (1407) (1406) (1405) (1404) (1403) (1402) (1401) 
(1520) (1519) (1518) (1517) (1516) (1515) (1514) (1513) (1512) (1511) (1510) (1509) (1508) (1507) (1506) (1505) (1504) (1503) (1502) (1501) 
(1620) (1619) (1618) (1617) (1616) (1615) (1614) (1613) (1612) (1611) (1610) (1609) (1608) (1607) (1606) (1605) (1604) (1603) (1602) (1601) 
(1720) (1719) (1718) (1717) (1716) (1715) (1714) (1713) (1712) (1711) (1710) (1709) (1708) (1707) (1706) (1705) (1704) (1703) (1702) (1701) 
(1820) (1819) (1818) (1817) (1816) (1815) (1814) (1813) (1812) (1811) (1810) (1809) (1808) (1807) (1806) (1805) (1804) (1803) (1802) (1801) 
(1920) (1919) (1918) (1917) (1916) (1915) (1914) (1913) (1912) (1911) (1910) (1909) (1908) (1907) (1906) (1905) (1904) (1903) (1902) (1901) 
(2020) (2019) (2018) (2017) (2016) (2015) (2014) (2013) (2012) (2011) (2010) (2009) (2008) (2007) (2006) (2005) (2004) (2003) (2002) (2001) 
] def

/i 0 def

mleft mbottom moveto
hex_width 2 div 2 lowfirstcol sub 0.5 hex_height mul mul rmoveto
lowfirstcol 1 eq { -1 } { 1 } ifelse 

cols {
   currentpoint
   rows {
      currentpoint

      coord_text i get stringwidth pop
      coord_bearing rotate
      0 coord_distance rmoveto
      coord_bearing neg rotate
      coord_tilt rotate
      2 div neg 0 rmoveto
      coord_text i get show
      coord_tilt neg rotate

      moveto
      0 hex_height rmoveto

      /i i 1 add def
   } repeat
   moveto
   
   neg
   dup
   
   0.5 hex_height mul mul
   0.75 hex_width mul
   exch

   rmoveto
} repeat

stroke

showpage

%%Trailer
cleartomark countdictstack exch sub { end } repeat restore
%%EOF

